import{c as j,r as n,j as e,L as F,U as C,C as W,K as ie,t as ne,k as R,i as D,Z as _,N as $,O as ce,B as K,d as oe,a as G,J as Y,Q as de,X as xe,f as me}from"./index-DI4h6RxA.js";import{f as H,S as pe,M as X,r as Q}from"./index-UXc_GrYR.js";import{A as U}from"./activity-C3au5KJk.js";import{D as ee,G as se,b as k}from"./branchFusionService-qSa0a6Uo.js";import{C as he,B as ue}from"./clock-EVrCCgKE.js";import{p as te,R as ge}from"./parsing-BK81cBSf.js";import{M as fe}from"./maximize-2-BIU4OahT.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=j("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=j("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=j("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=j("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=j("Container",[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=j("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=j("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=j("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=j("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=j("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=j("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),B={firstName:"",lastName:"",middleName:"",email:"",phone:"",address1:"",address2:"",city:"",state:"",zipCode:"",country:"USA",company:"",jobTitle:""},Z=typeof chrome<"u"&&!!chrome.runtime&&!!chrome.runtime.id,Se=()=>{const[a,p]=n.useState(B),[x,r]=n.useState(!1),[m,i]=n.useState("idle"),[g,h]=n.useState(!0);n.useEffect(()=>{l()},[]);const l=async()=>{h(!0);try{if(Z)chrome.runtime.sendMessage({to:"BACKGROUND",payload:{action:"get_profile"}},c=>{c!=null&&c.profile&&p({...B,...c.profile}),h(!1)});else{const c=localStorage.getItem("bilge_user_profile");c&&p({...B,...JSON.parse(c)}),h(!1)}}catch(c){console.error("Failed to load profile:",c),h(!1)}},o=async()=>{r(!0),i("idle");try{Z?chrome.runtime.sendMessage({to:"BACKGROUND",payload:{action:"save_profile",profile:a}},c=>{c!=null&&c.success?i("success"):i("error"),r(!1),setTimeout(()=>i("idle"),3e3)}):(localStorage.setItem("bilge_user_profile",JSON.stringify(a)),i("success"),r(!1),setTimeout(()=>i("idle"),3e3))}catch(c){console.error("Failed to save profile:",c),i("error"),r(!1),setTimeout(()=>i("idle"),3e3)}},f=(c,y)=>{p(s=>({...s,[c]:y}))},d=({label:c,field:y,icon:s,placeholder:u,type:M="text",className:z=""})=>e.jsxs("div",{className:`flex flex-col gap-1.5 ${z}`,children:[e.jsxs("label",{className:"text-[10px] font-bold text-secondary uppercase tracking-wider flex items-center gap-1.5",children:[e.jsx(s,{size:12,className:"text-gray-500"}),c]}),e.jsx("input",{type:M,value:String(a[y]||""),onChange:P=>f(y,P.target.value),placeholder:u,className:"w-full px-3 py-2 bg-surface rounded-lg border border-border/50 text-sm text-primary placeholder:text-secondary/50 focus:outline-none focus:ring-2 focus:ring-accent/30 focus:border-accent/50 transition-all"})]});return g?e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-background",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(F,{size:32,className:"text-accent animate-spin"}),e.jsx("span",{className:"text-xs text-secondary",children:"Loading profile..."})]})}):e.jsx("div",{className:"w-full h-full bg-background overflow-y-auto",children:e.jsxs("div",{className:"max-w-2xl mx-auto p-4 sm:p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-primary flex items-center gap-2",children:[e.jsx(C,{className:"text-accent",size:24}),"Auto-Fill Profile"]}),e.jsx("p",{className:"text-xs text-secondary mt-1",children:"Your profile data for automatic form filling"})]})}),e.jsxs("div",{className:"bg-accent/5 border border-accent/20 rounded-xl p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-accent/10 rounded-lg",children:e.jsx(Ne,{size:20,className:"text-accent"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"Quick Fill Shortcut"}),e.jsxs("p",{className:"text-xs text-secondary mt-0.5",children:["Press ",e.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface rounded text-xs font-mono border border-border/50",children:"Ctrl+Shift+L"})," (Mac: ",e.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface rounded text-xs font-mono border border-border/50",children:"Cmd+Shift+L"}),") to auto-fill any form"]})]})]}),e.jsxs("div",{className:"bg-surface/50 rounded-xl border border-border/50 p-4 space-y-4",children:[e.jsxs("h2",{className:"text-sm font-semibold text-primary flex items-center gap-2",children:[e.jsx(C,{size:16,className:"text-gray-500"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(d,{label:"First Name",field:"firstName",icon:C,placeholder:"John"}),e.jsx(d,{label:"Last Name",field:"lastName",icon:C,placeholder:"Doe"}),e.jsx(d,{label:"Middle Name",field:"middleName",icon:C,placeholder:"(optional)"}),e.jsx("div",{})," "]})]}),e.jsxs("div",{className:"bg-surface/50 rounded-xl border border-border/50 p-4 space-y-4",children:[e.jsxs("h2",{className:"text-sm font-semibold text-primary flex items-center gap-2",children:[e.jsx(J,{size:16,className:"text-gray-500"}),"Contact Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(d,{label:"Email",field:"email",icon:J,placeholder:"john@example.com",type:"email"}),e.jsx(d,{label:"Phone",field:"phone",icon:ve,placeholder:"555-123-4567",type:"tel"})]})]}),e.jsxs("div",{className:"bg-surface/50 rounded-xl border border-border/50 p-4 space-y-4",children:[e.jsxs("h2",{className:"text-sm font-semibold text-primary flex items-center gap-2",children:[e.jsx(S,{size:16,className:"text-gray-500"}),"Address"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{label:"Street Address",field:"address1",icon:S,placeholder:"123 Main Street",className:"col-span-2"}),e.jsx(d,{label:"Apt / Suite / Unit",field:"address2",icon:S,placeholder:"Apt 4B (optional)",className:"col-span-2"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsx(d,{label:"City",field:"city",icon:S,placeholder:"New York",className:"col-span-2 sm:col-span-2"}),e.jsx(d,{label:"State",field:"state",icon:S,placeholder:"NY",className:"col-span-1"}),e.jsx(d,{label:"ZIP Code",field:"zipCode",icon:S,placeholder:"10001",className:"col-span-1"})]}),e.jsx(d,{label:"Country",field:"country",icon:S,placeholder:"USA"})]})]}),e.jsxs("div",{className:"bg-surface/50 rounded-xl border border-border/50 p-4 space-y-4",children:[e.jsxs("h2",{className:"text-sm font-semibold text-primary flex items-center gap-2",children:[e.jsx(q,{size:16,className:"text-gray-500"}),"Professional (Optional)"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(d,{label:"Company",field:"company",icon:q,placeholder:"Acme Inc."}),e.jsx(d,{label:"Job Title",field:"jobTitle",icon:be,placeholder:"Software Engineer"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 pb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[m==="success"&&e.jsxs("div",{className:"flex items-center gap-1.5 text-green-600 text-xs animate-fade-in",children:[e.jsx(W,{size:14}),"Profile saved"]}),m==="error"&&e.jsxs("div",{className:"flex items-center gap-1.5 text-red-500 text-xs animate-fade-in",children:[e.jsx(ie,{size:14}),"Failed to save"]})]}),e.jsxs("button",{onClick:o,disabled:x,className:"flex items-center gap-2 px-6 py-2.5 bg-accent text-white rounded-xl font-medium text-sm hover:bg-accent/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-accent/20 hover:shadow-accent/30",children:[x?e.jsx(F,{size:16,className:"animate-spin"}):e.jsx(we,{size:16}),x?"Saving...":"Save Profile"]})]})]})})},Ce=()=>{const[a,p]=n.useState(null),[x,r]=n.useState(!0),m=async()=>{var l;try{typeof chrome<"u"&&((l=chrome.runtime)!=null&&l.sendMessage)?chrome.runtime.sendMessage({type:"GET_SELF_HEALING_STATS"},o=>{o!=null&&o.ok&&p(o.stats),r(!1)}):r(!1)}catch(o){console.error("Failed to fetch stats:",o),r(!1)}};n.useEffect(()=>{m()},[]);const i=async()=>{var l;if(confirm("Clear all recovery statistics?"))try{typeof chrome<"u"&&((l=chrome.storage)!=null&&l.local)&&(await chrome.storage.local.remove("__bilge_recovery_telemetry_v1"),p(null),m())}catch(o){console.error("Failed to clear stats:",o)}},g=()=>{if(!a)return;const l=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),o=URL.createObjectURL(l),f=document.createElement("a");f.href=o,f.download=`bilge-recovery-stats-${Date.now()}.json`,f.click(),document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(o)};if(x)return e.jsx("div",{className:"p-4 text-secondary",children:"Loading stats..."});if(!a||a.totalRecoveries===0)return e.jsx("div",{className:"p-4 rounded-xl bg-surface border border-border",children:e.jsxs("div",{className:"flex items-center gap-2 text-secondary",children:[e.jsx(U,{size:18}),e.jsx("span",{className:"text-sm",children:"No recovery data yet. Stats will appear after Bilge helps recover from failed selectors."})]})});const h=Object.entries(a.byStrategy).sort((l,o)=>o[1]-l[1]);return e.jsxs("div",{className:"p-4 rounded-xl bg-surface border border-border space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-bold text-primary flex items-center gap-2",children:[e.jsx(U,{size:16}),"Self-Healing Statistics"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:g,className:"p-1.5 rounded-lg hover:bg-white/5 text-secondary",title:"Export",children:e.jsx(ee,{size:14})}),e.jsx("button",{onClick:i,className:"p-1.5 rounded-lg hover:bg-white/5 text-secondary",title:"Clear",children:e.jsx(ne,{size:14})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[e.jsx(je,{size:14}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Success Rate"})]}),e.jsxs("div",{className:"text-2xl font-black text-green-600",children:[a.successRate,"%"]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[e.jsx(he,{size:14}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Avg Time"})]}),e.jsxs("div",{className:"text-2xl font-black text-blue-600",children:[a.avgDuration,"ms"]})]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-secondary",children:"Total Recoveries"}),e.jsx("span",{className:"font-bold text-primary",children:a.totalRecoveries})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-secondary",children:"Successful"}),e.jsx("span",{className:"font-bold text-green-600",children:a.successCount})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-secondary",children:"Failed"}),e.jsx("span",{className:"font-bold text-rose-600",children:a.failureCount})]}),h.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-secondary uppercase mb-2",children:"Top Strategies"}),e.jsx("div",{className:"space-y-1",children:h.slice(0,5).map(([l,o])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-secondary font-mono",children:l}),e.jsx("span",{className:"text-xs font-bold text-primary",children:o})]},l))})]})]})},ze=()=>{const[a,p]=n.useState([]),[x,r]=n.useState([]),[m,i]=n.useState(""),[g,h]=n.useState("kernel"),l=m.trim().toLowerCase(),o=x.filter(s=>l?s.name.toLowerCase().includes(l)||s.description.toLowerCase().includes(l)||s.id.toLowerCase().includes(l)||s.category.toLowerCase().includes(l):!0),f=a.filter(s=>s.runtime===(g==="vm"?"vm":"container")).filter(s=>l?[s.name,s.region,s.ip||"",s.image||"",(s.tags||[]).join(" ")].join(" ").toLowerCase().includes(l):!0);n.useEffect(()=>{const s=H.subscribe(p),u=R.subscribe(r);return()=>{s(),u()}},[]);const d=s=>{switch(s){case"active":case"online":return"bg-green-500";case"provisioning":case"booting":return"bg-blue-500";case"maintenance":return"bg-yellow-500";case"stopped":case"offline":return"bg-red-500";default:return"bg-gray-500"}},c=s=>{const u=s.status==="online"?"offline":"online";H.updateServerStatus(s.id,u)},y=s=>{R.toggleService(s)};return e.jsxs("div",{className:"w-full h-full bg-background flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"min-h-16 border-b border-border/50 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 px-4 sm:px-8 py-3 bg-surface/30 backdrop-blur-sm shrink-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsxs("h1",{className:"text-xl font-semibold text-primary tracking-tight flex items-center gap-2",children:[e.jsx(D,{size:20,className:"text-accent"})," Infrastructure Hub"]}),g==="kernel"&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-blue-500/10 text-blue-700 text-[10px] font-bold uppercase tracking-wide",children:[x.filter(s=>s.status==="active").length,"/",x.length," Core Modules"]}),x.some(s=>s.status==="stopped")&&e.jsxs("button",{onClick:()=>R.startAllServices(),className:"flex items-center gap-1.5 px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider bg-accent text-white rounded-lg hover:bg-accent/90 transition-all shadow-sm shadow-accent/20",children:[e.jsx(_,{size:10,fill:"currentColor"}),"Start All"]}),x.some(s=>s.status==="active"&&!s.isEssential)&&e.jsxs("button",{onClick:()=>R.stopAllServices(),className:"flex items-center gap-1.5 px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider bg-surface border border-border text-secondary rounded-lg hover:bg-red-50 hover:text-red-500 hover:border-red-200 transition-all",children:[e.jsx($,{size:10}),"Stop All"]})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 w-full lg:w-auto",children:e.jsxs("div",{className:"flex bg-surface border border-border rounded-lg p-0.5 sm:mr-2 overflow-x-auto no-scrollbar",children:[e.jsxs("button",{onClick:()=>h("kernel"),className:`flex items-center gap-2 px-3 py-1 text-xs font-medium rounded-md transition-all ${g==="kernel"?"bg-white dark:bg-white/10 text-primary shadow-sm":"text-secondary hover:text-primary"}`,children:[e.jsx(_,{size:12}),"Kernel"]}),e.jsxs("button",{onClick:()=>h("vm"),className:`flex items-center gap-2 px-3 py-1 text-xs font-medium rounded-md transition-all ${g==="vm"?"bg-white dark:bg-white/10 text-primary shadow-sm":"text-secondary hover:text-primary"}`,children:[e.jsx(ce,{size:12}),"VMs"]}),e.jsxs("button",{onClick:()=>h("container"),className:`flex items-center gap-2 px-3 py-1 text-xs font-medium rounded-md transition-all ${g==="container"?"bg-white dark:bg-white/10 text-primary shadow-sm":"text-secondary hover:text-primary"}`,children:[e.jsx(ye,{size:12}),"Nodes"]})]})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[g==="kernel"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(s=>e.jsxs("div",{className:`group relative bg-white dark:bg-[#1C1C1E] border rounded-2xl p-5 shadow-sm transition-all hover:shadow-md ${s.status==="active"?"border-accent/20":"border-border"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-2.5 rounded-xl ${s.status==="active"?"bg-accent/10 text-accent":"bg-surface text-secondary"}`,children:s.category==="compute"?e.jsx(D,{size:20}):s.category==="intelligence"?e.jsx(K,{size:20}):s.category==="data"?e.jsx(ue,{size:20}):e.jsx(U,{size:20})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`px-2 py-0.5 rounded text-[9px] font-bold uppercase tracking-wider ${s.status==="active"?"bg-green-500/10 text-green-600":s.status==="stopped"?"bg-red-500/10 text-red-600":"bg-blue-500/10 text-blue-600 animate-pulse"}`,children:s.status}),e.jsx("button",{onClick:()=>y(s.id),className:`p-1.5 rounded-lg transition-all ${s.status==="active"?"text-red-500 hover:bg-red-50":"text-green-500 hover:bg-green-50"}`,children:e.jsx($,{size:18})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-primary mb-1",children:s.name}),e.jsx("p",{className:"text-xs text-secondary leading-relaxed h-10 line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50 flex items-center justify-between text-[10px] text-secondary font-mono",children:[e.jsxs("span",{children:["PID: ",s.id.toUpperCase()]}),s.status==="active"&&e.jsx("span",{children:"UP: 99.9%"})]})]},s.id))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:hidden space-y-3",children:[f.map(s=>e.jsxs("div",{className:"bg-white dark:bg-[#1C1C1E] border border-border rounded-2xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${d(s.status)} mt-1`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-primary truncate",children:s.name}),e.jsx("div",{className:"font-mono text-[10px] text-secondary mt-1 truncate",children:s.ip||s.image})]})]}),e.jsx("button",{onClick:()=>c(s),className:"p-2 -mr-1 -mt-1 hover:bg-black/5 rounded-lg text-secondary transition-colors",title:"Power toggle",children:e.jsx($,{size:16})})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-[11px]",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[9px] font-bold uppercase tracking-wider text-secondary/70",children:"Region"}),e.jsx("div",{className:"text-xs text-primary",children:s.region})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[9px] font-bold uppercase tracking-wider text-secondary/70",children:"Latency"}),e.jsxs("div",{className:"text-xs text-primary font-mono",children:[s.latency,"ms"]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] text-secondary mb-1",children:[e.jsx("span",{className:"uppercase font-semibold opacity-70",children:"Capacity"}),e.jsxs("span",{className:"font-mono",children:[s.players,"/",s.maxPlayers]})]}),e.jsx("div",{className:"w-full h-2 bg-border/30 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary/80",style:{width:`${s.players/s.maxPlayers*100}%`}})})]})]},s.id)),f.length===0&&e.jsx("div",{className:"text-center py-12 border-2 border-dashed border-border rounded-2xl text-sm text-secondary",children:"No instances match your filter."})]}),e.jsx("div",{className:"hidden md:block bg-white dark:bg-[#1C1C1E] border border-border rounded-2xl overflow-hidden shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-[900px] w-full text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border/50 bg-surface/30",children:[e.jsx("th",{className:"px-6 py-4 font-medium text-secondary w-[40px]"}),e.jsx("th",{className:"px-6 py-4 font-medium text-secondary",children:"Instance Name"}),e.jsx("th",{className:"px-6 py-4 font-medium text-secondary",children:"Region"}),e.jsx("th",{className:"px-6 py-4 font-medium text-secondary",children:"Capacity"}),e.jsx("th",{className:"px-6 py-4 font-medium text-secondary",children:"Latency"}),e.jsx("th",{className:"px-6 py-4 font-medium text-secondary text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border/30",children:f.map(s=>e.jsxs("tr",{className:"group hover:bg-surface/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${d(s.status)}`})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-primary",children:s.name}),e.jsx("span",{className:"font-mono text-[10px] text-secondary mt-1",children:s.ip||s.image})]})}),e.jsx("td",{className:"px-6 py-4 text-secondary",children:s.region}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 w-24 h-1.5 bg-border/30 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary/80",style:{width:`${s.players/s.maxPlayers*100}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-secondary",children:[s.players,"/",s.maxPlayers]})]})}),e.jsxs("td",{className:"px-6 py-4 font-mono text-xs text-secondary",children:[s.latency,"ms"]}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>c(s),className:"p-2 hover:bg-black/5 rounded-lg text-secondary transition-colors",children:e.jsx($,{size:16})})})]},s.id))})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ce,{}),e.jsx("div",{className:"flex flex-col justify-center items-center p-8 border-2 border-dashed border-border rounded-2xl bg-surface/20",children:e.jsxs("p",{className:"text-[10px] text-secondary/60 flex items-center gap-1 uppercase tracking-tighter font-bold",children:[e.jsx(ke,{size:10}),"Kernel Integrity Verified (CRC-32 OK)"]})})]})]})}),e.jsx("div",{className:"border-t border-border/50 px-4 sm:px-8 py-3 bg-surface/30 backdrop-blur-sm shrink-0",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"relative group w-full sm:w-72",children:[e.jsx(pe,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-secondary group-focus-within:text-primary transition-colors"}),e.jsx("input",{type:"text",placeholder:"Search resources...",value:m,onChange:s=>i(s.target.value),className:"w-full bg-white dark:bg-black/10 border border-border rounded-lg pl-9 pr-3 py-2 text-[16px] sm:text-sm focus:outline-none focus:border-accent/50 transition-all"})]})})})]})},Me=()=>Math.random().toString(36).substring(2,9),Pe=({message:a,onClose:p,isStreaming:x})=>{if(!a)return null;const{thinking:r,content:m}=te(a.content);return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4 md:p-8 animate-fade-in",onClick:p,children:e.jsxs("div",{className:"bg-white dark:bg-[#1C1C1E] w-full max-w-4xl max-h-[85vh] rounded-2xl shadow-2xl overflow-hidden flex flex-col border border-border",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"h-16 border-b border-border flex items-center justify-between px-4 sm:px-6 bg-surface/50 backdrop-blur-md shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${a.agentId==="auditor"?"bg-indigo-500/10 text-indigo-600":"bg-purple-500/10 text-purple-600"}`,children:a.agentId==="auditor"?e.jsx(K,{size:20}):e.jsx(ae,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:a.agentName}),e.jsx("p",{className:"text-xs text-secondary capitalize",children:a.type.replace("_"," ")})]})]}),e.jsx("button",{onClick:p,className:"p-2 hover:bg-black/5 dark:hover:bg-white/5 rounded-full text-secondary hover:text-primary transition-colors",children:e.jsx(xe,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-8 bg-background",children:e.jsxs("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:[r&&e.jsx(ge,{content:r,isStreaming:x&&!m}),e.jsx(X,{remarkPlugins:[Q],children:m})]})})]})})},Ie=({message:a,onClick:p,isStreaming:x})=>{const r=a.agentId==="auditor",m=r?"border-indigo-200 dark:border-indigo-900 bg-indigo-50 dark:bg-indigo-900/10":"border-purple-200 dark:border-purple-900 bg-purple-50 dark:bg-purple-900/10",i=r?"text-indigo-700 dark:text-indigo-400":"text-purple-700 dark:text-purple-400",{thinking:g,content:h}=te(a.content),l=g&&!h;return e.jsx("button",{onClick:p,className:`w-full text-left group relative overflow-hidden rounded-xl border ${m} p-4 transition-all hover:shadow-md hover:scale-[1.01]`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg bg-white dark:bg-black/20 shadow-sm ${i}`,children:x?e.jsx(F,{size:18,className:"animate-spin"}):r?e.jsx(K,{size:18}):e.jsx(ae,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-sm font-bold ${i}`,children:a.agentName}),e.jsx("span",{className:`text-[10px] uppercase tracking-wider px-1.5 rounded bg-white/50 dark:bg-black/20 border border-border ${l?"text-indigo-500 font-bold":"text-secondary"}`,children:l?"Analyzing...":x?"Working...":a.type.replace("_"," ")})]}),l?e.jsx("p",{className:"text-xs text-primary/70 line-clamp-2 font-mono italic opacity-60",children:g}):e.jsx("p",{className:"text-xs text-primary/70 truncate font-mono",children:h?h.substring(0,100).replace(/[#*`]/g,""):"Waiting for report..."})]}),e.jsx(fe,{size:16,className:"opacity-0 group-hover:opacity-100 transition-opacity text-secondary"})]})})},Ae=()=>{const{settings:a}=oe(),[p,x]=n.useState([]),[r,m]=n.useState(""),[i,g]=n.useState(a.currentBranch||"main"),[h,l]=n.useState([{id:"init",agentId:"pm",agentName:"Project Manager",type:"chat",content:"Fusion Lab initialized. Scanning repository...",timestamp:Date.now()}]),[o,f]=n.useState(""),[d,c]=n.useState(!1),[y,s]=n.useState(null),[u,M]=n.useState(null),[z,P]=n.useState(null),O=n.useRef(null);n.useEffect(()=>{(async()=>{if(a.githubRepo&&a.githubToken){const b=await k.analyzeScope(a.githubRepo,a.githubToken);x(b),b.length>1?m(b.find(w=>w!==i)||b[0]):b.length>0&&m(b[0])}else x(["main","feature/ai-agent"]),m("feature/ai-agent")})()},[]),n.useEffect(()=>{var t;(t=O.current)==null||t.scrollIntoView({behavior:"smooth"})},[h,u]);const v=(t,b,w,N)=>{const I=Me();return l(L=>[...L,{id:I,agentId:t,agentName:b,content:w,type:N,timestamp:Date.now()}]),I},V=(t,b)=>{l(w=>w.map(N=>N.id===t?{...N,content:N.content+b}:N))},E=async()=>{if(d)return;c(!0),M(null);const t=o||`Merge from ${r} to ${i}`;v("pm","You",t,"chat"),f(""),v("pm","Project Manager",`Acknowledged. Requesting index of '${r}' and '${i}'...`,"chat");const b=await k.indexBranch(a.githubRepo,r,a.githubToken),w=await k.indexBranch(a.githubRepo,i,a.githubToken),N=v("auditor","Auditor (DeepSeek R1)","","proposal");s(N);const I=await k.performAudit(b,w,t,A=>V(N,A));s(null);const L=v("integrator","Implementer (Gemini 3 Pro)","","proposal");s(L);const T=await k.generateMergePatch(I,t,A=>V(L,A));s(null),M(T.files);const le=await k.generatePMResponse(t,{audit:I,patchExplanation:T.text,files:T.files.map(A=>A.path)});v("pm","Project Manager",le,"chat"),c(!1)},re=async()=>{u&&(v("pm","You","Proceed with the merge.","chat"),await k.applyPatch(u),v("pm","Project Manager",`Merge Applied. ${u.length} files written to Virtual FS.`,"chat"),M(null))};return e.jsxs("div",{className:"w-full h-full bg-background flex flex-col overflow-hidden",children:[e.jsx(Pe,{message:z,onClose:()=>P(null),isStreaming:(z==null?void 0:z.id)===y}),e.jsxs("div",{className:"min-h-16 border-b border-border/50 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 px-4 sm:px-8 py-3 bg-surface/30 backdrop-blur-sm shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-600",children:e.jsx(se,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-primary tracking-tight",children:"Fusion Lab"}),e.jsx("p",{className:"text-xs text-secondary",children:"Intelligent Branch Integration"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 sm:items-center w-full lg:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-surface border border-border rounded-lg p-1 overflow-x-auto no-scrollbar",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-white/5 rounded-md border border-border/50 shadow-sm",children:[e.jsx(G,{size:14,className:"text-blue-500"}),e.jsx("select",{value:r,onChange:t=>m(t.target.value),className:"bg-transparent text-[16px] sm:text-xs font-mono font-medium focus:outline-none text-primary",children:p.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx(Y,{size:14,className:"text-secondary"}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-white/5 rounded-md border border-border/50 shadow-sm",children:[e.jsx(G,{size:14,className:"text-green-500"}),e.jsx("select",{value:i,onChange:t=>g(t.target.value),className:"bg-transparent text-[16px] sm:text-xs font-mono font-medium focus:outline-none text-primary",children:p.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsxs("button",{onClick:E,disabled:d||!!u,className:"w-full sm:w-auto flex items-center justify-center gap-2 bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg text-xs font-bold transition-all shadow-lg disabled:opacity-50",children:[d?e.jsx(F,{size:14,className:"animate-spin"}):e.jsx(de,{size:14}),d?"Merging...":"Run Analysis"]})]})]}),e.jsx("div",{className:"flex-1 flex overflow-hidden bg-[#F5F5F7] dark:bg-[#09090b]",children:e.jsxs("div",{className:"flex-1 flex flex-col w-full",children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[h.map(t=>e.jsxs("div",{className:`flex gap-4 animate-fade-in ${t.agentName==="You"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 border shadow-sm ${t.agentName==="You"?"bg-primary text-white border-primary":"bg-white dark:bg-white/10 text-primary border-border"}`,children:t.agentName==="You"?e.jsx(C,{size:16}):e.jsx(_,{size:16})}),e.jsxs("div",{className:`flex flex-col gap-1 max-w-[85%] ${t.agentName==="You"?"items-end":"items-start"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-primary",children:t.agentName}),e.jsx("span",{className:"text-[10px] text-secondary",children:new Date(t.timestamp).toLocaleTimeString()})]}),e.jsx("div",{className:`rounded-2xl p-4 text-sm leading-relaxed shadow-sm ${t.agentName==="You"?"bg-primary text-white":"bg-white dark:bg-[#1C1C1E] border border-border text-primary"}`,children:t.agentId==="auditor"||t.agentId==="integrator"?e.jsx(Ie,{message:t,onClick:()=>P(t),isStreaming:t.id===y}):e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsx(X,{remarkPlugins:[Q],children:t.content})})})]})]},t.id)),u&&e.jsx("div",{className:"animate-slide-in pl-12",children:e.jsx("div",{className:"bg-green-50 dark:bg-green-900/10 border border-green-200 dark:border-green-800 rounded-xl p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-800/30 rounded-lg text-green-700 dark:text-green-400",children:e.jsx(ee,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-primary",children:"Merge Patch Ready"}),e.jsxs("p",{className:"text-xs text-secondary",children:[u.length," files generated for ",i]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>P({id:"patch",agentId:"integrator",agentName:"Patch Files",content:u.map(t=>`### ${t.path}
\`\`\`typescript
${t.content}
\`\`\``).join(`

`),type:"patch",timestamp:Date.now()}),className:"px-4 py-2 bg-surface hover:bg-black/5 border border-border rounded-lg text-xs font-medium transition-colors",children:"View Files"}),e.jsxs("button",{onClick:re,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-xs font-bold transition-colors shadow-sm flex items-center gap-2",children:[e.jsx(W,{size:14})," Apply"]})]})]})})}),e.jsx("div",{ref:O})]})}),e.jsx("div",{className:"p-4 bg-surface border-t border-border",children:e.jsxs("div",{className:"max-w-3xl mx-auto relative",children:[e.jsx("input",{type:"text",value:o,onChange:t=>f(t.target.value),onKeyDown:t=>t.key==="Enter"&&E(),disabled:d||!!u,placeholder:u?"Review the patch above...":"Describe the merge goal...",className:"w-full bg-white dark:bg-black/10 border border-border rounded-xl px-4 py-3 text-[16px] sm:text-sm focus:outline-none focus:border-accent shadow-sm disabled:opacity-50"}),e.jsx("button",{onClick:E,disabled:d||!o.trim()||!!u,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-0",children:e.jsx(Y,{size:16})})]})})]})})]})},De=()=>{const[a,p]=n.useState("profile"),x=[{id:"profile",label:"Identity",icon:C,description:"Personal data for form-filling"},{id:"servers",label:"Infrastructure",icon:D,description:"Kernel and server status"},{id:"fusion",label:"Fusion Lab",icon:se,description:"Multi-agent branch integration"}];return e.jsxs("div",{className:"w-full h-full flex flex-col md:flex-row overflow-hidden bg-background",children:[e.jsxs("aside",{className:"w-full md:w-64 border-b md:border-b-0 md:border-r border-border/50 bg-surface/30 backdrop-blur-sm flex flex-col shrink-0",children:[e.jsxs("div",{className:"p-6 hidden md:block",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1 text-primary",children:[e.jsx(me,{size:20,className:"text-secondary"}),e.jsx("h2",{className:"text-lg font-bold tracking-tight",children:"Settings"})]}),e.jsx("p",{className:"text-[10px] text-secondary uppercase tracking-[0.2em] font-black opacity-50",children:"Configuration Hub"})]}),e.jsx("nav",{className:"flex-1 px-2 py-2 md:px-3 md:py-0 flex flex-row md:flex-col gap-1 overflow-x-auto no-scrollbar",children:x.map(r=>{const m=r.icon,i=a===r.id;return e.jsxs("button",{onClick:()=>p(r.id),className:`
                  flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all text-left min-w-fit md:min-w-0 flex-1 md:flex-none
                  ${i?"bg-accent text-white shadow-lg shadow-accent/20":"text-secondary hover:text-primary hover:bg-black/5 dark:hover:bg-white/5"}
                `,children:[e.jsx(m,{size:18,strokeWidth:i?2.5:2,className:"shrink-0"}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"text-xs font-bold leading-none mb-0.5",children:r.label}),e.jsx("div",{className:`text-[10px] truncate max-w-[160px] ${i?"text-white/70":"text-secondary/60"}`,children:r.description})]}),e.jsx("span",{className:"md:hidden text-xs font-bold",children:r.label})]},r.id)})})]}),e.jsxs("main",{className:"flex-1 overflow-hidden relative",children:[a==="profile"&&e.jsx(Se,{}),a==="servers"&&e.jsx(ze,{}),a==="fusion"&&e.jsx(Ae,{})]})]})};export{De as SettingsPage};
